<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Research – LucyJackson</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../img/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-13a880968ca3be20aca46692eb4600d6.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="floating nav-fixed slimcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/logo.png" alt="" class="navbar-logo light-content">
    <img src="../img/logo.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">LucyJackson</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../research/index.html" aria-current="page"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../pubs/index.html"> 
<span class="menu-text">Academic Output</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cv2/index.html"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../goodies/index.html"> 
<span class="menu-text">Goodies</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/lucejackson"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/lucy-jackson-490671167/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:l.jackson.4@research.gla.ac.uk"> <i class="bi bi-envelope" role="img" aria-label="email">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Lucy-Jackson"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-cats-out-the-bag-a-study-of-real-time-sound-change-in-the-socially-stratified-glaswegian-cat-vowel" id="toc-the-cats-out-the-bag-a-study-of-real-time-sound-change-in-the-socially-stratified-glaswegian-cat-vowel" class="nav-link active" data-scroll-target="#the-cats-out-the-bag-a-study-of-real-time-sound-change-in-the-socially-stratified-glaswegian-cat-vowel">The CAT’s Out the Bag: A study of real-time sound change in the socially stratified Glaswegian CAT vowel</a></li>
  <li><a href="#lets-talk-about-class---uk-perceptions-of-social-class-and-personality-traits" id="toc-lets-talk-about-class---uk-perceptions-of-social-class-and-personality-traits" class="nav-link" data-scroll-target="#lets-talk-about-class---uk-perceptions-of-social-class-and-personality-traits">Let’s talk about Class - UK perceptions of social class and personality traits</a></li>
  <li><a href="#accentuating-identities" id="toc-accentuating-identities" class="nav-link" data-scroll-target="#accentuating-identities">Accentuating Identities</a></li>
  <li><a href="#a-game-of-phones" id="toc-a-game-of-phones" class="nav-link" data-scroll-target="#a-game-of-phones">A Game of Phones</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Research</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><br> Here is a brief summary of my research projects, current and past. I have designed it in a way that is accessible to both linguists and non-linguists.</p>
<p>For more information, please don’t hesitate to get in touch!</p>
<section id="the-cats-out-the-bag-a-study-of-real-time-sound-change-in-the-socially-stratified-glaswegian-cat-vowel" class="level2">
<h2 class="anchored" data-anchor-id="the-cats-out-the-bag-a-study-of-real-time-sound-change-in-the-socially-stratified-glaswegian-cat-vowel">The CAT’s Out the Bag: A study of real-time sound change in the socially stratified Glaswegian CAT vowel</h2>
<p>Alongside my PhD, I am very interested in looking at sound change and different analytical methods we can use to get a better picture of what is going on. I looked at the CAT vowel quality in Glasgow over the last 60 years, and whether it is socially stratified in its quality between the working-class and middle-class communities.</p>
<p>The Glaswegian CAT vowel (equivalent to British English TRAP/BATH/PALM) has been shown to be relatively stable over time with a little bit of wobbling around, but not significantly so. However, recent research has found this vowel quality to be significant in marking community membership in Glaswegian high school, and political party affiliation.</p>
<p>My questions were to see if 1) the CAT vowel is socially stratified between working-class (WC) and middle-class (MC) Glaswegians, and 2) if this stratification changed over time. For example, sometimes the two communities may be quite similar, but in the next decade they may be extremely distinct.</p>
<p>I employed an alternate statistical method to look at sound change over time, with the use of Generalised Additive Mixed Models (GAMMs). This type of modelling allowed me to look at any non-linear relationships between the vowel quality over time, and plot two separate trajectories for the speech community – allowing me to identify any key points in time for sound change. In the below example of what GAMM modelling can facilitate, you can see two trajectories of the working-class CAT vowel (orange) and middle-class CAT vowel (grey) and their F2 values over time.</p>
<p><img src="img/catdemonstration.png" style="height: 85%; width: 85%; object-fit: contain"></p>
<p>To look at this, I created a large-corpora of forced-aligned speech data from multiple sources. Speech was obtained from 79 speakers across six decades, male and female, and aged 25-65 years of age (from Glasgow/greater Glasgow area). Vowel normalisation took place, and log-transformation of vowel duration. I then filtered the dataset to have just CAT vowels (that did not precede liquids /r,l/). This resulted in 9,777 individual tokens.</p>
<p>I created GAMMs to look at both vowel height (F1) and frontness/backness (F2). With this, I could model any overall changes that may fluctuate over time between the speech of the two social classes of Glasgow.</p>
<p><img src="img/CAT_Aug.gif" style="height: 100%; width: 100%; object-fit: contain"></p>
<p>For my presentation at <a href="https://wp.lancs.ac.uk/uklvc15/">UKLVC15</a>, I plotted these trajectories as an animation to help visualise the trends in the data. I explored the significant stratification between the two classes, and trajectory divergence which saw the 2000s as a ‘temporal catalyst’ of change, and significant effect of time for the divergence between the classes. For this conference, I explored the social relevance of this timepoint (in a sociolinguistic variationist perspective), to see how changing social meaning, that was indexed by this vowel quality, could be contributing towards this sound change. This involved looking at emerging sub-cultures in Glasgow at this time, the role of the media in transmitting ideologies, and active negotiation of working-class and middle-class identity with the use of super-local variation such as CAT vowel quality (a very condensed down version).</p>
<p>For anymore information regarding this project, please do not hesitate to get in touch!</p>
</section>
<section id="lets-talk-about-class---uk-perceptions-of-social-class-and-personality-traits" class="level2">
<h2 class="anchored" data-anchor-id="lets-talk-about-class---uk-perceptions-of-social-class-and-personality-traits">Let’s talk about Class - UK perceptions of social class and personality traits</h2>
<p>How do we measure bias and perceptions of people? To first do this, we need to use materials/stimuli that are <em>normed</em> for various levels of social class and personality traits. I will be using these normed materials in my eye-tracking experiment: a novel implicit method in examining unconscious accent biases.</p>
<p><img src="img/class7.png" class="img-fluid"></p>
<p>To achieve this, I conducted a large-scale perceptual study (over 200 participants). I explored their perceptions towards social class and judgements of personality traits according to exhibited social behaviours. This is to create a novel, database of 110 stimuli objects that are normed for the representative levels of social class (working-class vs middle-class) and social traits (low vs high level of a trait).</p>
<p>This normed database of materials will be used in my own PhD research, but will be available online very soon. Please get in touch if you have any questions in the mean-time.</p>
<p>Additionally to this, I explored variation in population biases according to individual’s background (i.e., age, geographic origins, social class and sexual identity). This illustrated fascinating insights into bias formation and variation across society. Get in touch if you would like to know more!</p>
</section>
<section id="accentuating-identities" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="accentuating-identities">Accentuating Identities</h2>
<p>For part of my PhD research, I am interested in how accents are used in the media. Accents can be used to build character identities, by allowing us to rely on social stereotypes present in society. Using accents and language varieties can be a useful technique to cultivate these fictional worlds, but it can lead to accent bias and accent-based stereotyping in society.</p>
<p>To look at how accents are portrayed in the media, I have conducted an empirical investigation into how the Glaswegian vernacular (GV) accent is portrayed in film.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/neds.png" class="img-fluid figure-img"></p>
<figcaption>Neds (2010, based in Glasgow)</figcaption>
</figure>
</div>
</div></div><p>This research is the first quantitative examination of UK accent portrayals in film, with a focus on the GV accent. We analysed 5825 data points from 233 characters across 12 films, evaluating characters on 25 social and behavioural traits.</p>
<p>Significant patterns were found in the data, where GV accented characters were portrayed with considerably heightened levels of stigmatised behaviours (e.g., profanity use, substance use, aggression) and downgraded levels of competence (e.g., intelligence). This corresponds to what is already present in language attitude research on the perception of Glaswegians.</p>
<p>Data modelling was carried out to visualise these patterns even further. Like we can see below, with the predicted probability of an imaginary character, based on their accent. We see that GV has one of the largest proportions of ‘5’, showing extreme levels of profanity use.</p>
<p><img src="img/profanity.graph.png" style="height: 85%; width: 85%; object-fit: contain" onclick="window.open();"></p>
<p>From this small dataset, significant patterns of accent bias are present. We know that accents are a salient tool in creating fictional worlds, and we might even argue that accent-based stereotypes are part and parcel of the nature of depicting society. But, does this reliance on the social information imbued in accents further reinforce our biases and stereotypes?</p>
<p>For anyone interested, analysis for this study used non-parametric testing and cumulative link mixed models. These are handy tools when dealing with ordinal data such as Likert data.</p>
</section>
<section id="a-game-of-phones" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="a-game-of-phones">A Game of Phones</h2>
<p><img src="img/jonsnow.gif" style="height: 100%; width: 100%; object-fit: contain" onclick="window.open('https://guarant.cz/icphs2023/737.pdf', 'blank');"></p>
<p>For my Masters dissertation, I conducted a socio-phonetic analysis of Yorkshire English in Game of Thrones and presented my findings at the <a href="https://guarant.cz/icphs2023/737.pdf" target="_blank">International Congress of Phonetic Sciences 2023</a>.</p>
<p>Accents in media, like Game of Thrones, provide quick cues for audiences to understand characters and social hierarchies, often mapping real-world stereotypes onto fictional worlds. For example, the prestigious Lannister family speak in Received Pronunciation (RP), which we associate with royalty.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="img/GOT.png" class="img-fluid"></p>
</div></div><p>To look at mediated accent portrayals of the Yorkshire accent, I analysed three characters’ Yorkshire performances in Game of Thrones: native Yorkshire speaker Sean Bean and non-native speakers Kit Harrington and Richard Madden. Using acoustic analysis, I examined the following Yorkshire accent features: STRUT-FOOT vowel merger and monophthongal variants of GOAT &amp; FACE vowels.</p>
<p><img src="img/strut.png" style="height: 90%; width: 90%; object-fit: contain" onclick="window.open('https://guarant.cz/icphs2023/737.pdf', 'blank');"></p>
<p>(Jackson, 2023)</p>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
</colgroup>
<tbody>
<tr class="odd">
<td>In most Yorkshire accents, the STRUT and FOOT vowels [ʌ-ʊ] are merged. As a Yorkshire lass myself, I would say both these words with the exact same vowel as they are merged for me. Similarly, you can see these vowels merged by the Sheffield actor, Sean Bean (SB). However, the non-native actors (KH and RM) fail to produce a STRUT-FOOT merger in their Yorkshire performances.</td>
</tr>
<tr class="even">
<td>Moving on to the monophthongal FACE and GOAT variants [eɪ, əʊ] in the Yorkshire accent, rather that the common diphthongal quality we hear in most other UK English accents. We can see that Sean Bean (SB) demonstrates minimal movements across the vowel trajectory (25%, 50% and 75% point of the vowel), making his FACE and GOAT vowels very monophthongal (as expected). Unfortunately, the non-native actors seem to really struggle with this, and can’t seem to shake the extra movement we would see in their own native accents.</td>
</tr>
<tr class="odd">
<td><img src="img/face.png" alt="FACE vowel - Jackson, 2023." style="width: 50%; height: auto;"> <em>FACE vowel - (Jackson, 2023)</em></td>
</tr>
<tr class="even">
<td><img src="img/goat.png" alt="FACE vowel - Jackson, 2023." style="width: 50%; height: auto;"> <em>GOAT vowel - (Jackson, 2023)</em></td>
</tr>
<tr class="odd">
<td>We can see from above that the non-native speakers are struggling to consistently replicate Yorkshire features similar to what is expected in native Yorkshire speech. The second part of this study asked lay listeners (not phonetically trained) to ‘blindly’ rate these performances. Listeners rated Sean as the most credible Yorkshire speaker, while Kit and Richard were rated less favourably, with listeners using these performances to predict their true origins.</td>
</tr>
</tbody>
</table>
<p>An interesting add-on was that listeners were then asked to predict what these Yorkshire voices would look like. Descriptions such as savage, dirty, a bit dim but loyal were all given. Which, interestingly, corresponds to the overall appearance of the Starks family, as the dishevelled, Northern underdogs.</p>
<p>In short, non-native speakers failed to consistently produce Yorkshire phonetic features, and listeners picked up on these discrepancies, linking them to the speakers’ actual origins. Listeners were also found to use the phonetic signal (the accent) to make predictions about the speakers’ social behaviours and appearances. This raises questions about the reinforcement of stereotypes through media portrayals of accents.</p>
<p>And perhaps, we are all just playing the <strong>game of phones</strong> to decipher social meaning through language.</p>
<p><img src="img/shame.gif" style="height: 100%; width: 100%; object-fit: contain" onclick="window.open('', 'blank');"></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p><span class="faux-block">© 2024 Lucy Jackson CC </span></p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>